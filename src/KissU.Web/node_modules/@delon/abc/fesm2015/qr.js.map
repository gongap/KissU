{"version":3,"file":"qr.js.map","sources":["ng://@delon/abc/qr/qr.config.ts","ng://@delon/abc/qr/qr.service.ts","ng://@delon/abc/qr/qr.component.ts","ng://@delon/abc/qr/qr.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({ providedIn: 'root' })\nexport class QRConfig {\n  /** èæ¯ï¼é»è®¤ï¼`white` */\n  background = 'white';\n  /** èæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ï¼é»è®¤ï¼`1.0` */\n  backgroundAlpha = 1;\n  /** åæ¯ï¼é»è®¤ï¼`black` */\n  foreground = 'black';\n  /** åæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ï¼é»è®¤ï¼`1.0` */\n  foregroundAlpha = 1;\n  /** è¯¯å·®æ ¡æ­£çº§å«ï¼é»è®¤ï¼`L` */\n  level: 'L' | 'M' | 'Q' | 'H' = 'L';\n  /** äºç»´ç è¾åºå¾çMIMEç±»åï¼é»è®¤ï¼`image/png` */\n  mime = 'image/png';\n  /** åè¾¹è·ï¼åä½ï¼pxï¼ï¼é»è®¤ï¼`10` */\n  padding = 10;\n  /** å¤§å°ï¼åä½ï¼pxï¼ï¼é»è®¤ï¼`220` */\n  size = 220;\n}\n","import { Injectable } from '@angular/core';\nimport { QRConfig } from './qr.config';\n\ndeclare var QRious: any;\n\n@Injectable({ providedIn: 'root' })\nexport class QRService {\n  /** å½åqrå®ä¾ */\n  readonly qr: any;\n  /** èæ¯ */\n  background: string;\n  /** èæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\n  backgroundAlpha = 1;\n  /** åæ¯ */\n  foreground: string;\n  /** åæ¯éæçº§å«ï¼èå´ï¼`0-1` ä¹é´ */\n  foregroundAlpha: number;\n  /** è¯¯å·®æ ¡æ­£çº§å« */\n  level: string;\n  /** äºç»´ç è¾åºå¾çMIMEç±»å */\n  mime: string;\n  /** åè¾¹è·ï¼åä½ï¼pxï¼ */\n  padding: number;\n  /** å¤§å°ï¼åä½ï¼pxï¼ */\n  size: number;\n  /** å¼ */\n  value: string;\n\n  constructor(cog: QRConfig) {\n    Object.assign(this, cog);\n    this.qr = new QRious();\n  }\n\n  /**\n   * çæäºç»´ç ï¼å¹¶è¿åBase64ç¼ç \n   *\n   * @param [value] éæ°æå®å¼\n   */\n  refresh(value?: string | {}): string {\n    this.qr.set(\n      typeof value === 'object'\n        ? value\n        : {\n            background: this.background,\n            backgroundAlpha: this.backgroundAlpha,\n            foreground: this.foreground,\n            foregroundAlpha: this.foregroundAlpha,\n            level: this.level,\n            padding: this.padding,\n            size: this.size,\n            value: value || this.value,\n          },\n    );\n    return this.dataURL;\n  }\n\n  /**\n   * è¿åå½åäºç»´ç Base64ç¼ç \n   */\n  get dataURL(): string {\n    return this.qr.toDataURL();\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n} from '@angular/core';\nimport { InputNumber } from '@delon/util';\n\nimport { QRConfig } from './qr.config';\nimport { QRService } from './qr.service';\n\n@Component({\n  selector: 'qr',\n  template: `\n    <img class=\"qr__img\" src=\"{{ dataURL }}\" />\n  `,\n  host: {\n    '[class.qr]': 'true',\n    '[style.height.px]': 'size',\n    '[style.width.px]': 'size',\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class QRComponent implements OnChanges {\n  dataURL: string;\n\n  // #region fields\n\n  @Input() background: string;\n  @Input() backgroundAlpha: number;\n  @Input() foreground: string;\n  @Input() foregroundAlpha: number;\n  @Input() level: string;\n  @Input() mime: string;\n  @Input() @InputNumber() padding: number;\n  @Input() @InputNumber() size: number;\n  @Input() value: string;\n  @Output() readonly change = new EventEmitter<string>();\n\n  // #endregion\n\n  constructor(cog: QRConfig, private srv: QRService, private cdr: ChangeDetectorRef) {\n    Object.assign(this, { ...new QRConfig(), ...cog });\n  }\n\n  ngOnChanges(): void {\n    this.dataURL = this.srv.refresh({\n      background: this.background,\n      backgroundAlpha: this.backgroundAlpha,\n      foreground: this.foreground,\n      foregroundAlpha: this.foregroundAlpha,\n      level: this.level,\n      mime: this.mime,\n      padding: this.padding,\n      size: this.size,\n      value: this.value,\n    });\n    this.cdr.detectChanges();\n    this.change.emit(this.dataURL);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { DelonUtilModule } from '@delon/util';\n\nimport { QRComponent } from './qr.component';\n\nconst COMPONENTS = [QRComponent];\n\n@NgModule({\n  imports: [CommonModule, DelonUtilModule],\n  declarations: [...COMPONENTS],\n  exports: [...COMPONENTS],\n})\nexport class QRModule {}\n"],"names":["tslib_1.__decorate"],"mappings":"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"}
