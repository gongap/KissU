/**
 * @license ng-alain(cipchk@qq.com) v7.0.3
 * (c) 2019 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/common/http"),require("file-saver"),require("@angular/common"),require("@angular/core"),require("@delon/util")):"function"==typeof define&&define.amd?define("@delon/abc/zip",["exports","@angular/common/http","file-saver","@angular/common","@angular/core","@delon/util"],n):n((e.delon=e.delon||{},e.delon.abc=e.delon.abc||{},e.delon.abc.zip={}),e.ng.common.http,e.saveAs,e.ng.common,e.ng.core,e.delon.util)}(this,function(e,n,r,t,o,i){"use strict";var c=function(){function e(){this.url="//cdn.bootcss.com/jszip/3.1.5/jszip.min.js",this.utils=[]}return e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=o.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),u=function(){return(u=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},a=function(){function e(e,n,t){this.cog=e,this.http=n,this.lazy=t}return e.prototype.init=function(){return this.lazy.load([this.cog.url].concat(this.cog.utils))},e.prototype.check=function(e){if(!e)throw new Error("get instance via `ZipService.create()`")},e.prototype.read=function(o,r){var i=this;return new Promise(function(n,t){i.init().then(function(){if("string"!=typeof o){var e=new FileReader;e.onload=function(e){JSZip.loadAsync(e.target.result,r).then(function(e){return n(e)})},e.readAsBinaryString(o)}else i.http.request("GET",o,{responseType:"arraybuffer"}).subscribe(function(e){JSZip.loadAsync(e,r).then(function(e){return n(e)})},function(e){t(e)})})})},e.prototype.create=function(){var e=this;return new Promise(function(n){e.init().then(function(){var e=new JSZip;n(e)})})},e.prototype.pushUrl=function(o,r,i){var e=this;return this.check(o),new Promise(function(n,t){e.http.request("GET",i,{responseType:"arraybuffer"}).subscribe(function(e){o.file(r,e),n()},function(e){t({url:i,error:e})})})},e.prototype.save=function(e,n){this.check(e);var o=u({},n);return new Promise(function(n,t){e.generateAsync(u({type:"blob"},o.options),o.update).then(function(e){o.callback&&o.callback(e),r.saveAs(e,o.filename||"download.zip"),n()},function(e){t(e)})})},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:c},{type:n.HttpClient},{type:i.LazyService}]},e.ngInjectableDef=o.defineInjectable({factory:function(){return new e(o.inject(c),o.inject(n.HttpClient),o.inject(i.LazyService))},token:e,providedIn:"root"}),e}(),s=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,i.DelonUtilModule]}]}],e}();e.ZipService=a,e.ZipModule=s,e.ZipConfig=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=zip.umd.min.js.map