{"version":3,"sources":["ng://ng-zorro-antd/calendar/nz-calendar-cells.ts","ng://ng-zorro-antd/calendar/nz-calendar-header.component.ts","ng://ng-zorro-antd/calendar/nz-calendar.component.ts","ng://ng-zorro-antd/calendar/nz-calendar.module.ts"],"names":["Directive","args","selector","exportAs","NzDateCellDirective","NzMonthCellDirective","NzDateFullCellDirective","NzMonthFullCellDirective","Object","defineProperty","NzCalendarHeaderComponent","prototype","this","_activeDate","value","setUpYears","activeDate","getFullYear","getMonth","fullscreen","i18n","getLocale","Calendar","year","month","ngOnInit","setUpMonths","updateYear","yearChange","emit","start","activeYear","yearOffset","end","yearTotal","years","i","push","label","months","dateInMonth","setMonth","monthText","dateHelper","format","Component","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","template","host","[style.display]","[class.ant-fullcalendar-header]","I18n","DateHelperService","Input","Output","mode","modeChange","EventEmitter","monthChange","Date","NzCalendarComponent","updateDate","dateCell","dateFullCell","monthCell","monthFullCell","coerceBooleanProperty","startOfWeek","startOfMonth","weekStartsOn","getFirstDayOfWeek","setUpDaysInWeek","setUpMonthsInYear","setUpDateMatrix","calculateCurrentDate","calculateActiveDate","calculateCurrentMonth","calculateActiveMonth","onModeChange","nzModeChange","nzPanelChange","date","onDateSelect","nzSelectChange","onYearSelect","setYear","onMonthSelect","writeValue","cdr","markForCheck","registerOnChange","fn","onChangeFn","registerOnTouched","onTouchFn","touched","dayChanged","isSameDay","monthChanged","isSameMonth","yearChanged","isSameYear","nzValueChange","daysInWeek","weekStart","addDays","title","relyOnDatePipe","monthsInYear","dateMatrix","monthStart","monthEnd","endOfMonth","weekDiff","differenceInCalendarWeeks","week","row","calendarStart","day","monthDiff","differenceInCalendarMonths","dateFormat","getLocaleData","rel","isThisMonth","currentDateRow","currentDate","currentDateCol","differenceInCalendarDays","activeDateRow","activeDateCol","isThisYear","yearStart","startOfYear","currentMonthRow","Math","floor","currentMonthCol","activeMonthRow","activeMonthCol","providers","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","NzI18nService","ChangeDetectorRef","ContentChild","DateCell","read","TemplateRef","DateFullCell","MonthCell","MonthFullCell","HostBinding","nzMode","NgModule","declarations","exports","imports","CommonModule","FormsModule","NzI18nModule","NzRadioModule","NzSelectModule","NzCalendarModule"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[nzDateCell]',\n  exportAs: 'nzDateCell'\n})\nexport class NzDateCellDirective {}\n\n@Directive({\n  selector: '[nzMonthCell]',\n  exportAs: 'nzMonthCell'\n})\nexport class NzMonthCellDirective {}\n\n@Directive({\n  selector: '[nzDateFullCell]',\n  exportAs: 'nzDateFullCell'\n})\nexport class NzDateFullCellDirective {}\n\n@Directive({\n  selector: '[nzMonthFullCell]',\n  exportAs: 'nzMonthFullCell'\n})\nexport class NzMonthFullCellDirective {}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  ViewEncapsulation\n} from '@angular/core';\nimport setMonth from 'date-fns/set_month';\nimport { DateHelperService, NzI18nService as I18n } from 'ng-zorro-antd/i18n';\n\n@Component({\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  selector: 'nz-calendar-header',\n  exportAs: 'nzCalendarHeader',\n  templateUrl: './nz-calendar-header.component.html',\n  host: {\n    '[style.display]': `'block'`,\n    '[class.ant-fullcalendar-header]': `true`\n  }\n})\nexport class NzCalendarHeaderComponent implements OnInit {\n  @Input() mode: 'month' | 'year' = 'month';\n  @Output() readonly modeChange: EventEmitter<'month' | 'year'> = new EventEmitter();\n\n  @Input() fullscreen: boolean = true;\n\n  @Input()\n  set activeDate(value: Date) {\n    this._activeDate = value;\n    this.setUpYears();\n  }\n\n  get activeDate(): Date {\n    return this._activeDate;\n  }\n\n  @Output() readonly yearChange: EventEmitter<number> = new EventEmitter();\n  @Output() readonly monthChange: EventEmitter<number> = new EventEmitter();\n\n  _activeDate = new Date();\n  yearOffset: number = 10;\n  yearTotal: number = 20;\n  years: Array<{ label: string; value: number }>;\n  months: Array<{ label: string; value: number }>;\n\n  get activeYear(): number {\n    return this.activeDate.getFullYear();\n  }\n\n  get activeMonth(): number {\n    return this.activeDate.getMonth();\n  }\n\n  get size(): string {\n    return this.fullscreen ? 'default' : 'small';\n  }\n\n  get yearTypeText(): string {\n    return this.i18n.getLocale().Calendar.year;\n  }\n\n  get monthTypeText(): string {\n    return this.i18n.getLocale().Calendar.month;\n  }\n\n  constructor(private i18n: I18n, private dateHelper: DateHelperService) {}\n\n  ngOnInit(): void {\n    this.setUpYears();\n    this.setUpMonths();\n  }\n\n  updateYear(year: number): void {\n    this.yearChange.emit(year);\n    this.setUpYears(year);\n  }\n\n  private setUpYears(year?: number): void {\n    const start = (year || this.activeYear) - this.yearOffset;\n    const end = start + this.yearTotal;\n\n    this.years = [];\n    for (let i = start; i < end; i++) {\n      this.years.push({ label: `${i}`, value: i });\n    }\n  }\n\n  private setUpMonths(): void {\n    this.months = [];\n\n    for (let i = 0; i < 12; i++) {\n      const dateInMonth = setMonth(this.activeDate, i);\n      const monthText = this.dateHelper.format(dateInMonth, 'MMM');\n      this.months.push({ label: monthText, value: i });\n    }\n  }\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport {\n  forwardRef,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport addDays from 'date-fns/add_days';\nimport differenceInCalendarDays from 'date-fns/difference_in_calendar_days';\nimport differenceInCalendarMonths from 'date-fns/difference_in_calendar_months';\nimport differenceInCalendarWeeks from 'date-fns/difference_in_calendar_weeks';\nimport endOfMonth from 'date-fns/end_of_month';\nimport isSameDay from 'date-fns/is_same_day';\nimport isSameMonth from 'date-fns/is_same_month';\nimport isSameYear from 'date-fns/is_same_year';\nimport isThisMonth from 'date-fns/is_this_month';\nimport isThisYear from 'date-fns/is_this_year';\nimport setMonth from 'date-fns/set_month';\nimport setYear from 'date-fns/set_year';\nimport startOfMonth from 'date-fns/start_of_month';\nimport startOfWeek from 'date-fns/start_of_week';\nimport startOfYear from 'date-fns/start_of_year';\n\nimport { DateHelperService, NzI18nService } from 'ng-zorro-antd/i18n';\n\nimport {\n  NzDateCellDirective as DateCell,\n  NzDateFullCellDirective as DateFullCell,\n  NzMonthCellDirective as MonthCell,\n  NzMonthFullCellDirective as MonthFullCell\n} from './nz-calendar-cells';\n\nexport type ModeType = 'month' | 'year';\n\n@Component({\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  selector: 'nz-calendar',\n  exportAs: 'nzCalendar',\n  templateUrl: './nz-calendar.component.html',\n  providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => NzCalendarComponent), multi: true }]\n})\nexport class NzCalendarComponent implements ControlValueAccessor, OnInit {\n  @Input() nzMode: ModeType = 'month';\n  @Output() readonly nzModeChange: EventEmitter<ModeType> = new EventEmitter();\n  @Output() readonly nzPanelChange: EventEmitter<{ date: Date; mode: ModeType }> = new EventEmitter();\n\n  @Output() readonly nzSelectChange: EventEmitter<Date> = new EventEmitter();\n\n  @Input() set nzValue(value: Date) {\n    this.updateDate(value, false);\n  }\n  @Output() readonly nzValueChange: EventEmitter<Date> = new EventEmitter();\n\n  @Input()\n  set nzDateCell(value: TemplateRef<{ $implicit: Date }>) {\n    this.dateCell = value;\n  }\n\n  @Input()\n  set nzDateFullCell(value: TemplateRef<{ $implicit: Date }>) {\n    this.dateFullCell = value;\n  }\n\n  @Input()\n  set nzMonthCell(value: TemplateRef<{ $implicit: Date }>) {\n    this.monthCell = value;\n  }\n\n  @Input()\n  set nzMonthFullCell(value: TemplateRef<{ $implicit: Date }>) {\n    this.monthFullCell = value;\n  }\n\n  @Input()\n  set nzFullscreen(value: boolean) {\n    this.fullscreen = coerceBooleanProperty(value);\n  }\n  get nzFullscreen(): boolean {\n    return this.fullscreen;\n  }\n\n  @Input()\n  set nzCard(value: boolean) {\n    this.fullscreen = !coerceBooleanProperty(value);\n  }\n  get nzCard(): boolean {\n    return !this.fullscreen;\n  }\n\n  @ContentChild(DateCell, { read: TemplateRef })\n  set dateCellChild(value: TemplateRef<{ $implicit: Date }>) {\n    if (value) {\n      this.dateCell = value;\n    }\n  }\n\n  @ContentChild(DateFullCell, { read: TemplateRef })\n  set dateFullCellChild(value: TemplateRef<{ $implicit: Date }>) {\n    if (value) {\n      this.dateFullCell = value;\n    }\n  }\n\n  @ContentChild(MonthCell, { read: TemplateRef })\n  set monthCellChild(value: TemplateRef<{ $implicit: Date }>) {\n    if (value) {\n      this.monthCell = value;\n    }\n  }\n\n  @ContentChild(MonthFullCell, { read: TemplateRef })\n  set monthFullCellChild(value: TemplateRef<{ $implicit: Date }>) {\n    if (value) {\n      this.monthFullCell = value;\n    }\n  }\n\n  @HostBinding('class.ant-fullcalendar--fullscreen')\n  fullscreen = true;\n\n  daysInWeek: DayCellContext[] = [];\n  monthsInYear: MonthCellContext[] = [];\n  dateMatrix: DateCellContext[][] = [];\n  activeDate: Date = new Date();\n  currentDateRow: number = -1;\n  currentDateCol: number = -1;\n  activeDateRow: number = -1;\n  activeDateCol: number = -1;\n  currentMonthRow: number = -1;\n  currentMonthCol: number = -1;\n  activeMonthRow: number = -1;\n  activeMonthCol: number = -1;\n  dateCell: TemplateRef<{ $implicit: Date }> | null = null;\n  dateFullCell: TemplateRef<{ $implicit: Date }> | null = null;\n  monthCell: TemplateRef<{ $implicit: Date }> | null = null;\n  monthFullCell: TemplateRef<{ $implicit: Date }> | null = null;\n\n  private currentDate = new Date();\n  private onChangeFn: (date: Date) => void = () => {};\n  private onTouchFn: () => void = () => {};\n\n  private get calendarStart(): Date {\n    return startOfWeek(startOfMonth(this.activeDate), { weekStartsOn: this.dateHelper.getFirstDayOfWeek() });\n  }\n\n  constructor(private i18n: NzI18nService, private cdr: ChangeDetectorRef, private dateHelper: DateHelperService) {}\n\n  ngOnInit(): void {\n    this.setUpDaysInWeek();\n    this.setUpMonthsInYear();\n    this.setUpDateMatrix();\n    this.calculateCurrentDate();\n    this.calculateActiveDate();\n    this.calculateCurrentMonth();\n    this.calculateActiveMonth();\n  }\n\n  onModeChange(mode: ModeType): void {\n    this.nzModeChange.emit(mode);\n    this.nzPanelChange.emit({ date: this.activeDate, mode });\n  }\n\n  onDateSelect(date: Date): void {\n    this.updateDate(date);\n    this.nzSelectChange.emit(date);\n  }\n\n  onYearSelect(year: number): void {\n    const date = setYear(this.activeDate, year);\n    this.updateDate(date);\n    this.nzSelectChange.emit(date);\n  }\n\n  onMonthSelect(month: number): void {\n    const date = setMonth(this.activeDate, month);\n    this.updateDate(date);\n    this.nzSelectChange.emit(date);\n  }\n\n  writeValue(value: Date | null): void {\n    this.updateDate(value || new Date(), false);\n    this.cdr.markForCheck();\n  }\n\n  registerOnChange(fn: (date: Date) => void): void {\n    this.onChangeFn = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouchFn = fn;\n  }\n\n  private updateDate(date: Date, touched: boolean = true): void {\n    const dayChanged = !isSameDay(date, this.activeDate);\n    const monthChanged = !isSameMonth(date, this.activeDate);\n    const yearChanged = !isSameYear(date, this.activeDate);\n\n    this.activeDate = date;\n\n    if (dayChanged) {\n      this.calculateActiveDate();\n    }\n    if (monthChanged) {\n      this.setUpDateMatrix();\n      this.calculateCurrentDate();\n      this.calculateActiveMonth();\n    }\n    if (yearChanged) {\n      this.calculateCurrentMonth();\n    }\n\n    if (touched) {\n      this.onChangeFn(date);\n      this.onTouchFn();\n      this.nzValueChange.emit(date);\n    }\n  }\n\n  private setUpDaysInWeek(): void {\n    this.daysInWeek = [];\n    const weekStart = startOfWeek(this.activeDate, { weekStartsOn: this.dateHelper.getFirstDayOfWeek() });\n    for (let i = 0; i < 7; i++) {\n      const date = addDays(weekStart, i);\n      const title = this.dateHelper.format(date, this.dateHelper.relyOnDatePipe ? 'E' : 'ddd');\n      const label = this.dateHelper.format(date, this.dateHelper.relyOnDatePipe ? 'EEEEEE' : 'dd');\n      this.daysInWeek.push({ title, label });\n    }\n  }\n\n  private setUpMonthsInYear(): void {\n    this.monthsInYear = [];\n    for (let i = 0; i < 12; i++) {\n      const date = setMonth(this.activeDate, i);\n      const title = this.dateHelper.format(date, 'MMM');\n      const label = this.dateHelper.format(date, 'MMM');\n      const start = startOfMonth(date);\n      this.monthsInYear.push({ title, label, start });\n    }\n  }\n\n  private setUpDateMatrix(): void {\n    this.dateMatrix = [];\n    const monthStart = startOfMonth(this.activeDate);\n    const monthEnd = endOfMonth(this.activeDate);\n    const weekDiff =\n      differenceInCalendarWeeks(monthEnd, monthStart, { weekStartsOn: this.dateHelper.getFirstDayOfWeek() }) + 2;\n\n    for (let week = 0; week < weekDiff; week++) {\n      const row: DateCellContext[] = [];\n      const weekStart = addDays(this.calendarStart, week * 7);\n\n      for (let day = 0; day < 7; day++) {\n        const date = addDays(weekStart, day);\n        const monthDiff = differenceInCalendarMonths(date, this.activeDate);\n        const dateFormat = this.dateHelper.relyOnDatePipe\n          ? 'longDate'\n          : this.i18n.getLocaleData('DatePicker.lang.dateFormat', 'YYYY-MM-DD');\n        const title = this.dateHelper.format(date, dateFormat);\n        const label = this.dateHelper.format(date, this.dateHelper.relyOnDatePipe ? 'dd' : 'DD');\n        const rel = monthDiff === 0 ? 'current' : monthDiff < 0 ? 'last' : 'next';\n        row.push({ title, label, rel, value: date });\n      }\n      this.dateMatrix.push(row);\n    }\n  }\n\n  private calculateCurrentDate(): void {\n    if (isThisMonth(this.activeDate)) {\n      this.currentDateRow = differenceInCalendarWeeks(this.currentDate, this.calendarStart, {\n        weekStartsOn: this.dateHelper.getFirstDayOfWeek()\n      });\n      this.currentDateCol = differenceInCalendarDays(\n        this.currentDate,\n        addDays(this.calendarStart, this.currentDateRow * 7)\n      );\n    } else {\n      this.currentDateRow = -1;\n      this.currentDateCol = -1;\n    }\n  }\n\n  private calculateActiveDate(): void {\n    this.activeDateRow = differenceInCalendarWeeks(this.activeDate, this.calendarStart, {\n      weekStartsOn: this.dateHelper.getFirstDayOfWeek()\n    });\n    this.activeDateCol = differenceInCalendarDays(this.activeDate, addDays(this.calendarStart, this.activeDateRow * 7));\n  }\n\n  private calculateCurrentMonth(): void {\n    if (isThisYear(this.activeDate)) {\n      const yearStart = startOfYear(this.currentDate);\n      const monthDiff = differenceInCalendarMonths(this.currentDate, yearStart);\n      this.currentMonthRow = Math.floor(monthDiff / 3);\n      this.currentMonthCol = monthDiff % 3;\n    } else {\n      this.currentMonthRow = -1;\n      this.currentMonthCol = -1;\n    }\n  }\n\n  private calculateActiveMonth(): void {\n    this.activeMonthRow = Math.floor(this.activeDate.getMonth() / 3);\n    this.activeMonthCol = this.activeDate.getMonth() % 3;\n  }\n}\n\nexport interface DayCellContext {\n  title: string;\n  label: string;\n}\n\nexport interface MonthCellContext {\n  title: string;\n  label: string;\n  start: Date;\n}\n\nexport interface DateCellContext {\n  title: string;\n  label: string;\n  rel: 'last' | 'current' | 'next';\n  value: Date;\n}\n","/**\n * @license\n * Copyright Alibaba.com All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { NzI18nModule } from 'ng-zorro-antd/i18n';\nimport { NzRadioModule } from 'ng-zorro-antd/radio';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\n\nimport {\n  NzDateCellDirective,\n  NzDateFullCellDirective,\n  NzMonthCellDirective,\n  NzMonthFullCellDirective\n} from './nz-calendar-cells';\nimport { NzCalendarHeaderComponent } from './nz-calendar-header.component';\nimport { NzCalendarComponent } from './nz-calendar.component';\n\n@NgModule({\n  declarations: [\n    NzCalendarHeaderComponent,\n    NzCalendarComponent,\n    NzDateCellDirective,\n    NzDateFullCellDirective,\n    NzMonthCellDirective,\n    NzMonthFullCellDirective\n  ],\n  exports: [\n    NzCalendarComponent,\n    NzDateCellDirective,\n    NzDateFullCellDirective,\n    NzMonthCellDirective,\n    NzMonthFullCellDirective\n  ],\n  imports: [CommonModule, FormsModule, NzI18nModule, NzRadioModule, NzSelectModule]\n})\nexport class NzCalendarModule {}\n"]}